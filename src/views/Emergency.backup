<template>
  <div :class="['emergency-page', { 'police-flash': isInitialFlasher }]">
    <div class="alert-container">
      <div class="sos-anim">SOS</div>
      <h1 class="warning-title">æ£€æµ‹åˆ°ç´§æ€¥æ±‚åŠ©ä¿¡å·ï¼</h1>
      <button @click="goBack" class="back-btn">ç¡®è®¤å®‰å…¨ï¼Œè¿”å›ç›‘æ§</button>
    </div>
  </div>
</template>

<script setup>
import { ref, onMounted } from 'vue';
import { useRouter } from 'vue-router';

const router = useRouter();
const isInitialFlasher = ref(true); // é»˜è®¤å¼€å¯é—ªçƒ

const goBack = () => {
  router.push('/dashboard');
};

onMounted(() => {
  // 2ç§’ååœæ­¢çº¢è“äº¤æ›¿é—ªçƒï¼Œæ¢å¤ä¸ºæ­£å¸¸çš„ç´§æ€¥é¡µé¢èƒŒæ™¯
  setTimeout(() => {
    isInitialFlasher.value = false;
  }, 2000);

  // è¯­éŸ³æ’­æŠ¥ï¼ˆå¯é€‰ï¼Œå¢åŠ æ¼”ç¤ºéœ‡æ’¼æ„Ÿï¼‰
  const msg = new SpeechSynthesisUtterance("æ£€æµ‹åˆ°ç´§æ€¥æ±‚åŠ©ï¼Œè¯·ç«‹å³ç¡®è®¤ï¼");
  window.speechSynthesis.speak(msg);
});
</script>

<style scoped>
/* æ­£å¸¸çš„ç´§æ€¥é¡µé¢èƒŒæ™¯ï¼šæ·±çº¢è‰² */
.emergency-page {
  height: 100vh;
  background-color: #cf1322;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  transition: background-color 0.5s ease; /* åœæ­¢é—ªçƒæ—¶å¹³æ»‘è¿‡æ¸¡ */
}

/* ğŸš¨ çº¢è“äº¤æ›¿é—ªçƒæ ¸å¿ƒåŠ¨ç”» */
@keyframes police-light-flash {
  0% { background-color: #ff0000; } /* çº¯çº¢ */
  50% { background-color: #0000ff; } /* çº¯è“ */
  100% { background-color: #ff0000; }
}

.police-flash {
  /* 0.1s - 0.2s é¢‘ç‡æ˜¯çˆ†é—ªçš„æ„Ÿè§‰ */
  animation: police-light-flash 0.15s infinite; 
}

/* å…¶ä»–æ ·å¼ä¿æŒä¹‹å‰çš„é…ç½®... */
.sos-anim { font-size: 80px; font-weight: bold; }
.back-btn { margin-top: 20px; padding: 10px 25px; border-radius: 20px; border: none; cursor: pointer; }
</style>
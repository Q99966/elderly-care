<template>
  <div class="app-container">
    <div class="global-header" v-if="!$route.meta.hideLayout">
      <div class="status-row">
        <span class="tag">ğŸŸ¢ è®¾å¤‡åœ¨çº¿</span>
        <div class="right-info">
          <span>ğŸ“¶ -70dBm</span>
          <!-- <span class="battery">ğŸ”‹ 85%</span> -->
        </div>
      </div>
      <div class="location-row">
        <span class="icon">ğŸ“</span>
        <span class="text">{{ locationAddr }}</span>
      </div>
    </div>

    <div class="content">
      <router-view></router-view>
    </div>
    <BottomNav v-if="!$route.meta.hideLayout" />

  </div>
</template>

<script setup>
import { ref, onMounted } from 'vue'
import { useRoute } from 'vue-router'
import BottomNav from '@/components/Layout/BottomNav.vue'
import { getCurrentLocation } from '@/utils/location'

const route = useRoute()
const locationAddr = ref('æ­£åœ¨è·å–å®šä½...') // åˆå§‹çŠ¶æ€

onMounted(async () => {
  try {
    locationAddr.value = await getCurrentLocation()
  } catch (e) {
    locationAddr.value = 'å®šä½è·å–å¤±è´¥'
  }
})

</script>


<style>
/* å…¨å±€æ ·å¼ */
body { margin: 0; padding: 0; background-color: #f2f4f8; font-family: -apple-system, sans-serif; }
* { box-sizing: border-box; }

.app-container { 
  display: flex; flex-direction: column; height: 100vh; max-width: 600px; margin: 0 auto; 
  background: #f2f4f8; position: relative;
}

/* --- é¡¶éƒ¨çŠ¶æ€æ  --- */
.global-header {
  position: fixed; top: 0; left: 0; right: 0; z-index: 100;
  max-width: 600px; margin: 0 auto;
  height: 100px;
  background: linear-gradient(135deg, #3a7bd5 0%, #3a6073 100%);
  color: white;
  padding: 15px 20px;
  box-shadow: 0 4px 12px rgba(58, 123, 213, 0.3);
  border-bottom-left-radius: 20px;
  border-bottom-right-radius: 20px;
}
.status-row { display: flex; justify-content: space-between; font-size: 13px; opacity: 0.9; margin-bottom: 10px; }
.location-row { display: flex; align-items: center; font-size: 15px; font-weight: bold; }
.location-row .icon { margin-right: 6px; }

/* --- å†…å®¹åŒº --- */
.content { 
  flex: 1; 
  overflow-y: auto; 
  /* æ³¨æ„ï¼šè¿™é‡Œæˆ‘ä»¬ç»™ content ä¸€ä¸ªé¡¶éƒ¨ paddingï¼Œé˜²æ­¢è¢« header é®æŒ¡ã€‚
     ä½†å¦‚æœæ˜¯ç™»å½•é¡µï¼Œè¿™ä¸ª padding ä¼šå¯¼è‡´ä¸Šé¢æœ‰ç©ºç™½ã€‚
     ä¸è¿‡å› ä¸ºç™»å½•é¡µä½¿ç”¨äº† fixed è¦†ç›–å…¨å±æ ·å¼ï¼Œæ‰€ä»¥ä¸å—å½±å“ã€‚ */
  padding-top: 110px; 
  padding-bottom: 70px; 
  padding-left: 15px; padding-right: 15px;
}

</style>